<!doctype html>
<html lang="kk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ï—Ä–∂–∞–Ω & –ê—è–∂–∞–Ω ‚Äî –¢–æ–π“ì–∞ —à–∞“õ—ã—Ä–∞–º—ã–∑</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --gold:#c89b2b;
    --gold-2:#e0b84a;
    --muted:#444;
    --glass: rgba(255,255,255,0.72);
    --card: rgba(255,255,255,0.9);
  }
  html,body{height:100%;margin:0;font-family:"Poppins",system-ui, sans-serif;background:#fffaf2;color:var(--muted)}
  /* Background image + soft golden overlay */
  .hero-bg{
    position:fixed; inset:0; z-index:-2;
    background: center/cover no-repeat url('assets/bg.jpg');
    filter: blur(0.6px) saturate(1.05);
  }
  .bg-overlay{
    position:fixed; inset:0; z-index:-1;
    background: linear-gradient(180deg, rgba(255,250,245,0.55), rgba(255,245,230,0.55));
    mix-blend-mode: multiply;
  }

  main.container{max-width:980px;margin:28px auto;padding:28px}
  header.top{
    text-align:center;padding:36px 12px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.75));
    box-shadow: 0 8px 40px rgba(12,10,8,0.08); border:1px solid rgba(200,170,90,0.1);
    backdrop-filter: blur(6px);
  }

  h1.title{font-family:"Dancing Script",cursive;font-size:54px;margin:6px 0;color:var(--gold); text-shadow: 0 6px 18px rgba(200,150,40,0.08); letter-spacing:1px}
  p.lead{margin:6px 0 10px;font-size:18px;color:#333; max-width:760px;margin-left:auto;margin-right:auto}
  .sub{color:var(--muted);font-weight:600;margin-top:6px}

  /* Countdown */
  .countdown{
    display:flex;gap:12px;justify-content:center;margin-top:18px;flex-wrap:wrap;
  }
  .countdown .box{
    background:var(--card);padding:12px 18px;border-radius:12px;min-width:110px;
    box-shadow: 0 10px 30px rgba(12,10,8,0.06); text-align:center;
  }
  .countdown .big{font-size:20px;font-weight:700;color:var(--muted)}
  .countdown .tiny{font-size:13px;color:#6b6b6b}

  /* CTA */
  .cta{display:flex;gap:12px;justify-content:center;margin-top:20px}
  .btn{
    background: linear-gradient(90deg,var(--gold),var(--gold-2));
    color:#071018;border:0;padding:12px 20px;border-radius:24px;font-weight:700;cursor:pointer;box-shadow: 0 8px 24px rgba(200,150,40,0.12);
    transition: transform .18s, box-shadow .18s;
  }
  .btn:hover{transform:translateY(-4px); box-shadow: 0 12px 40px rgba(200,150,40,0.18)}
  .btn.secondary{background:transparent;border:1px solid rgba(0,0,0,0.06); color:var(--muted); font-weight:600}

  /* Details + map */
  .card{margin-top:26px;padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.95)); box-shadow: 0 10px 30px rgba(12,10,8,0.04)}
  .flex{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
  .left{flex:1;min-width:260px}
  .right{flex:1;min-width:260px}

  .venue{font-weight:700;color:var(--muted);margin-bottom:8px}
  .note{color:#666;margin-top:8px}

  iframe.map{width:100%;height:320px;border:0;border-radius:10px;overflow:hidden}

  /* subtle floating golden sparkles */
  .sparkle{
    position:fixed; width:8px;height:8px;border-radius:50%;background:linear-gradient(90deg,var(--gold),var(--gold-2)); opacity:0.9; filter:blur(0.2px);
    animation: floatUp linear infinite;
    z-index:0;
  }
  @keyframes floatUp{ from{transform:translateY(20vh) scale(.8)} to{transform:translateY(-30vh) scale(1.2)} }

  /* gallery */
  .gallery{display:flex;gap:8px;overflow:hidden;margin-top:16px;border-radius:10px}
  .gallery img{width:33%;height:140px;object-fit:cover;border-radius:8px;transition:transform .45s}
  .gallery img:hover{transform:scale(1.06)}

  /* guest list & rsvp */
  .rsvp-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:16px}
  input.gname{padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);min-width:220px}
  .result{margin-top:12px;color:var(--muted);font-weight:600}

  footer{margin-top:26px;text-align:center;color:#8a8a8a;font-size:13px}

  /* responsive */
  @media (max-width:720px){h1.title{font-size:36px}.gallery img{height:100px}}
</style>
</head>
<body>

  <!-- background -->
  <div class="hero-bg" aria-hidden="true"></div>
  <div class="bg-overlay" aria-hidden="true"></div>

  <!-- floating sparkles (decor) -->
  <div id="sparkles" aria-hidden="true"></div>

  <main class="container">
    <header class="top">
      <h1 class="title">–ï—Ä–∂–∞–Ω &amp; –ê—è–∂–∞–Ω</h1>
      <p class="lead">“ö“±—Ä–º–µ—Ç—Ç—ñ “õ–æ–Ω–∞“õ! –°—ñ–∑–¥–µ—Ä–¥—ñ —à—ã–Ω –∂“Ø—Ä–µ–∫—Ç–µ–Ω –±—ñ–∑–¥—ñ“£ —Ç–æ–π“ì–∞ —à–∞“õ—ã—Ä–∞–º—ã–∑. “ö—É–∞–Ω—ã—à—ã–º—ã–∑ –æ—Ä—Ç–∞“õ –±–æ–ª—Å—ã–Ω ‚Äî –∫–µ–ª—ñ–ø –∂“Ø–∑–¥–µ—Å—ñ“£—ñ–∑!</p>
      <div class="sub">01 “ö–∞–∑–∞–Ω 2025 ‚Äî 18:00 ‚Ä¢ ToiPro —Ç–æ–π—Ö–∞–Ω–∞—Å—ã, –¢–∞—Ä–∞–∑ “õ–∞–ª–∞—Å—ã</div>

      <!-- countdown -->
      <div class="countdown" id="countdown">
        <div class="box"><div class="big" id="days">0</div><div class="tiny">–ö“Ø–Ω</div></div>
        <div class="box"><div class="big" id="hours">0</div><div class="tiny">–°–∞“ì–∞—Ç</div></div>
        <div class="box"><div class="big" id="minutes">0</div><div class="tiny">–ú–∏–Ω—É—Ç</div></div>
        <div class="box"><div class="big" id="seconds">0</div><div class="tiny">–°–µ–∫—É–Ω–¥</div></div>
      </div>

      <div class="cta">
        <button class="btn" id="play-toggle">–ú—É–∑—ã–∫–∞–Ω—ã —Ç–æ“õ—Ç–∞—Ç—É</button>
        <button class="btn secondary" id="gallery-open">–ì–∞–ª–µ—Ä–µ—è</button>
      </div>
    </header>

    <!-- details card -->
    <section class="card">
      <div class="flex">
        <div class="left">
          <div class="venue">–¢–æ–π ”©—Ç–µ—Ç—ñ–Ω –æ—Ä—ã–Ω</div>
          <div>ToiPro —Ç–æ–π—Ö–∞–Ω–∞—Å—ã, –¢–∞—Ä–∞–∑ “õ–∞–ª–∞—Å—ã</div>
          <p class="note">–ö–µ–ª—É “Ø—à—ñ–Ω –∞–ª–¥—ã–Ω –∞–ª–∞ —Ö–∞–±–∞—Ä–ª–∞—Å—Å–∞“£—ã–∑ —ã“£“ì–∞–π–ª—ã: —Ç–æ–π–¥—ã“£ –∫“Ø–Ω—ñ –¥”ô–ª –∫–µ–ª—É—ñ“£—ñ–∑–¥—ñ ”©—Ç—ñ–Ω–µ–º—ñ–∑. “ö–æ–Ω–∞“õ—Ç–∞—Ä—ã–º—ã–∑“ì–∞ —ã“£“ì–∞–π–ª—ã –æ—Ä—ã–Ω –¥–∞–π—ã–Ω–¥–∞–ª–∞–¥—ã.</p>

          <div class="gallery" id="gallery">
            <img src="assets/photo1.jpg" alt="—Ç–æ–π —Å—É—Ä–µ—Ç—ñ 1">
            <img src="assets/photo2.jpg" alt="—Ç–æ–π —Å—É—Ä–µ—Ç—ñ 2">
            <img src="assets/photo3.jpg" alt="—Ç–æ–π —Å—É—Ä–µ—Ç—ñ 3">
          </div>

          <div class="rsvp-row">
            <input class="gname" id="guest-name" placeholder="–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑" />
            <button class="btn" id="btn-coming">–ö–µ–ª–µ–º—ñ–Ω</button>
            <button class="btn secondary" id="btn-notcoming">–ö–µ–ª–µ –∞–ª–º–∞–π–º—ã–Ω</button>
          </div>
          <div class="result" id="rsvp-result"></div>
        </div>

        <div class="right">
          <div class="venue">–ö–∞—Ä—Ç–∞</div>
          <iframe class="map" src="https://2gis.kz/taraz/geo/70000001051334510/71.364836,42.894600" loading="lazy"></iframe>

          <div style="margin-top:12px;color:#666;font-size:14px">–ê–¥—Ä–µ—Å: ToiPro —Ç–æ–π—Ö–∞–Ω–∞—Å—ã ‚Äî T–∞—Ä–∞–∑ “õ–∞–ª–∞—Å—ã. –ö–∞—Ä—Ç–∞–Ω—ã –∞—à—ã–ø, –±–∞“ì—ã—Ç –∞–ª—ã“£—ã–∑.</div>

          <div style="margin-top:14px">
            <div style="font-weight:700;margin-bottom:8px;color:var(--muted)">“ö–æ–Ω–∞“õ—Ç–∞—Ä —Ç—ñ–∑—ñ–º—ñ (–ª–æ–∫–∞–ª)</div>
            <ul id="list-coming" style="padding-left:18px;color:#444"></ul>
            <div style="height:10px"></div>
            <ul id="list-notcoming" style="padding-left:18px;color:#444"></ul>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div>¬© 2025 –ï—Ä–∂–∞–Ω &amp; –ê—è–∂–∞–Ω ‚Äî ToiPro</div>
    </footer>
  </main>

  <!-- audio (royalty-free music —Ñ–∞–π–ª—ã–Ω assets/music.mp3 –¥–µ–ø –∂“Ø–∫—Ç–µ) -->
  <audio id="bg-audio" loop crossorigin="anonymous">
    <source src="assets/music.mp3" type="audio/mpeg">
  </audio>

<script>
/* ========== Config (”©–∑–≥–µ—Ä—Ç—É–≥–µ –±–æ–ª–∞–¥—ã) ========== */
const CONFIG = {
  weddingISO: "2025-10-01T18:00:00", // —Ç–æ–π —É–∞“õ—ã—Ç—ã (ISO)
  names: "–ï—Ä–∂–∞–Ω & –ê—è–∂–∞–Ω",
  venue: "ToiPro —Ç–æ–π—Ö–∞–Ω–∞—Å—ã, –¢–∞—Ä–∞–∑",
  // –ï–≥–µ—Ä Google Apps Script URL-—ñ–Ω “õ–æ–π“ì—ã“£ –∫–µ–ª—Å–µ, “õ–æ—é: rsvpEndpoint: "https://script.google.com/macros/s/XXX/exec"
  rsvpEndpoint: "" // –±–æ—Å “õ–∞–ª—Å–∞ ‚Äî –ª–æ–∫–∞–ª—å —Å–∞“õ—Ç–∞—É
};
/* =============================================== */

/* –ú—É–∑—ã–∫–∞ –±–∞—Å“õ–∞—Ä—É */
const audio = document.getElementById('bg-audio');
const playToggle = document.getElementById('play-toggle');
let playing = false;
function tryPlay(){
  audio.volume = 0.65;
  audio.play().then(()=>{ playing=true; playToggle.textContent="–ú—É–∑—ã–∫–∞–Ω—ã —Ç–æ“õ—Ç–∞—Ç—É"; })
  .catch(()=>{ playing=false; playToggle.textContent="–ú—É–∑—ã–∫–∞–Ω—ã “õ–æ—Å—É (–±–∞—Å—ã–ø –∞—à—ã“£—ã–∑)"; });
}
tryPlay();

playToggle.addEventListener('click', ()=>{
  if(playing){ audio.pause(); playing=false; playToggle.textContent="–ú—É–∑—ã–∫–∞–Ω—ã “õ–æ—Å—É"; }
  else{ tryPlay(); }
});

/* —Å–∞–Ω–∞“õ (countdown) */
const weddingTime = new Date(CONFIG.weddingISO).getTime();
const elDays = document.getElementById('days');
const elHours = document.getElementById('hours');
const elMinutes = document.getElementById('minutes');
const elSeconds = document.getElementById('seconds');

function tick(){
  const now = Date.now();
  let diff = weddingTime - now;
  if(diff <= 0){
    elDays.textContent = 0; elHours.textContent = 0; elMinutes.textContent = 0; elSeconds.textContent = 0;
    document.getElementById('countdown').innerHTML = "<div style='font-weight:700;color:var(--gold);font-size:18px'>üéâ –¢–æ–π –±–∞—Å—Ç–∞–ª–¥—ã!</div>";
    clearInterval(timerInterval);
    return;
  }
  const d = Math.floor(diff / (1000*60*60*24));
  diff -= d*(1000*60*60*24);
  const h = Math.floor(diff / (1000*60*60));
  diff -= h*(1000*60*60);
  const m = Math.floor(diff / (1000*60));
  diff -= m*(1000*60);
  const s = Math.floor(diff/1000);
  elDays.textContent = d; elHours.textContent = h; elMinutes.textContent = m; elSeconds.textContent = s;
}
tick();
const timerInterval = setInterval(tick, 1000);

/* RSVP handlers: –∂–µ—Ä–≥—ñ–ª—ñ–∫—Ç—ñ –∫”©—Ä—Å–µ—Ç–∫—ñ—à –ø–µ–Ω optional Google Script POST */
const nameInput = document.getElementById('guest-name');
const btnComing = document.getElementById('btn-coming');
const btnNot = document.getElementById('btn-notcoming');
const result = document.getElementById('rsvp-result');
const listC = document.getElementById('list-coming');
const listN = document.getElementById('list-notcoming');

function appendLocal(name, status){
  const li = document.createElement('li');
  li.textContent = name + " ‚Äî " + (new Date()).toLocaleString();
  if(status === "coming") listC.prepend(li);
  else listN.prepend(li);
}

/* optional send to Google Apps Script if rsvpEndpoint provided */
async function postRSVP(payload){
  if(!CONFIG.rsvpEndpoint) return {ok:false, msg:"no endpoint"};
  try{
    const res = await fetch(CONFIG.rsvpEndpoint, {
      method: "POST",
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });
    const text = await res.text();
    return {ok:true, msg:text};
  }catch(e){
    return {ok:false, msg:e.message};
  }
}

async function handleRSVP(status){
  const nm = (nameInput.value || "").trim();
  if(!nm){ result.textContent = "”®—Ç—ñ–Ω—ñ—à, –∞—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑."; return; }
  result.textContent = "–ñ—ñ–±–µ—Ä—ñ–ª—É–¥–µ...";
  const payload = { name: nm, response: status, time: new Date().toISOString(), event: CONFIG.names, date: CONFIG.weddingISO };
  const res = await postRSVP(payload);
  if(res.ok){
    result.textContent = "–†–∞—Ö–º–µ—Ç! –°—ñ–∑–¥—ñ“£ –∂–∞—É–∞–±—ã“£—ã–∑ –∂–∞–∑—ã–ª–¥—ã.";
  } else {
    result.textContent = "–ñ–∞—É–∞–±—ã“£—ã–∑ –ª–æ–∫–∞–ª —Ç“Ø—Ä–¥–µ –∫”©—Ä—ñ–Ω—ñ—Å —Ç–∞–ø—Ç—ã. (–ï–≥–µ—Ä —Å–µ—Ä–≤–µ—Ä –æ—Ä–Ω–∞—Ç—Å–∞“£—ã–∑, –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Å–∞“õ—Ç–∞–ª–∞–¥—ã.)";
  }
  appendLocal(nm, status);
  nameInput.value = "";
}

btnComing.addEventListener('click', ()=> handleRSVP("–ö–µ–ª–µ–º—ñ–Ω"));
btnNot.addEventListener('click', ()=> handleRSVP("–ö–µ–ª–µ –∞–ª–º–∞–π–º—ã–Ω"));

/* gallery click to full (simple) */
document.getElementById('gallery-open').addEventListener('click', ()=>{
  const imgs = Array.from(document.querySelectorAll('#gallery img')).map(i=>i.src);
  if(imgs.length===0) return;
  // open first in new tab (simple)
  window.open(imgs[0], '_blank');
});

/* sparkles decoration */
(function spawnSparkles(){
  const container = document.getElementById('sparkles');
  const count = 9;
  for(let i=0;i<count;i++){
    const s = document.createElement('div');
    s.className='sparkle';
    s.style.left = (Math.random()*100)+'vw';
    s.style.top = (30 + Math.random()*50)+'vh';
    s.style.opacity = 0.8 - Math.random()*0.4;
    s.style.animationDuration = (6 + Math.random()*8)+'s';
    s.style.transform = `translateY(${20 + Math.random()*40}vh)`;
    container.appendChild(s);
  }
})();

/* graceful fallback: try to play audio on first user interaction if blocked */
function resumeAudio(){
  tryPlay();
  window.removeEventListener('pointerdown', resumeAudio);
  window.removeEventListener('keydown', resumeAudio);
}
window.addEventListener('pointerdown', resumeAudio);
window.addEventListener('keydown', resumeAudio);

/* Small: if no assets images exist, replace gallery images with inline SVG placeholders */
(function checkAssets(){
  const imgs = document.querySelectorAll('#gallery img');
  imgs.forEach(img=>{
    fetch(img.src, {method:'HEAD'}).catch(()=>{
      // if fetch fails, replace with placeholder base64 svg
      img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400"><rect width="100%" height="100%" fill="#fff8ed"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#b8860b" font-family="Poppins,sans-serif" font-size="20">–¢–æ–π —Å—É—Ä–µ—Ç—ñ</text></svg>`);
    });
  });
})();
</script>
</body>
</html>
